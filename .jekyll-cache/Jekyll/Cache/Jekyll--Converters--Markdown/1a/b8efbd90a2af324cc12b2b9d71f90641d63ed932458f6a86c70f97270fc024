I"ô%<p><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1">ìŠ¤í”„ë§ MVC 1í¸ - ë°±ì—”ë“œ ì›¹ ê°œë°œ í•µì‹¬ ê¸°ìˆ </a></p>

<h1 id="ê¸°ì¡´-ì„œë¸”ë¦¿jsp-ì˜-í•œê³„">ê¸°ì¡´ ì„œë¸”ë¦¿+JSP ì˜ í•œê³„</h1>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span><span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span><span class="o">{</span>		
  <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
  <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"age"</span><span class="o">));</span>
  
  <span class="c1">// logic</span>
  
  <span class="nc">String</span> <span class="n">viewPath</span> <span class="o">=</span> <span class="s">"/WEB-INF/shopping/product.jsp"</span><span class="o">;</span>
  <span class="nc">RequestDispatcher</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span>
  <span class="n">dispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ol>
  <li>ì¤‘ë³µ ì†ŒìŠ¤
    <ul>
      <li>HttpServletRequest request, HttpServletResponse response</li>
      <li>CharacterEncoding</li>
      <li>ë·° í˜¸ì¶œí•¨ìˆ˜</li>
    </ul>
  </li>
  <li>ViewPath ê´€ë¦¬
    <ul>
      <li>suffix, prefix ê°€ ë°”ë€Œë©´ ëª¨ë“  ì†ŒìŠ¤ì—ì„œ ë‹¤ ë°”ê¿”ì•¼ í•¨</li>
    </ul>
  </li>
  <li>ê³µí†µì²˜ë¦¬ë¥¼ ëª»í•œë‹¤</li>
</ol>

<h1 id="spring-mvc-ê¸°ë³¸-êµ¬ì¡°">Spring MVC ê¸°ë³¸ êµ¬ì¡°</h1>
<p><img src="/assets/img/SpringArchitecture.jpg" alt="SpringArchitecture" /></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/shopping/add"</span><span class="o">)</span> 
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">save</span><span class="o">(</span><span class="nd">@ModelAttribute</span> <span class="nc">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">item</span> <span class="o">=</span> <span class="n">itemRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
  
  <span class="c1">// logic</span>

  <span class="k">return</span> <span class="s">"/item/list"</span><span class="o">;</span>
<span class="o">}</span>	
</code></pre></div></div>
<p>/shopping/addë¥¼ í˜¸ì¶œí•˜ë©´â€¦</p>

<ol>
  <li>
    <p>urlì— ìƒê´€ì—†ì´ DispatcherServlet í˜¸ì¶œ</p>
  </li>
  <li>
    <p>/shopping/add ì™€ ë§¤í•‘ëœ public String save(@ModelAttribute Item item) ì¡°íšŒ</p>
  </li>
  <li>ì¡°íšŒëœ Handler ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì–´ëŒ‘í„° ì¡°íšŒ
    <ul>
      <li>public String save(@PathVariable long itemId, Model model), public String save(@RequestParam String item) ë“± í¸ì˜ì— ë”°ë¼ ë‹¤ì–‘í•œ parameterë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤. íŒŒë¼ë¯¸í„° ì¢…ë¥˜ì— ë§ê²Œ HandlerAdapterì—ì„œ ì²˜ë¦¬í•´ì¤€ë‹¤.</li>
      <li>Handlerë¥¼ 110V ë˜ëŠ” 220V ì½˜ì„¼íŠ¸, HandlerAdapterë¥¼ ë³€ì••ê¸° ë˜ëŠ” ì–´ëŒ‘í„° ì •ë„ë¡œ ìƒê°í•˜ë©´ ë  ê²ƒ ê°™ë‹¤.</li>
    </ul>
  </li>
  <li>
    <p>ì¡°íšŒëœ ì–´ëŒ‘í„° ì‹¤í–‰</p>
  </li>
  <li>
    <p>ì‘ì„±í•œ Handlerì˜ ë¡œì§ ì‹¤í–‰</p>
  </li>
  <li>
    <p>HandlerAdapter ì— ì˜í•´ ë°˜í™˜ëœ ViewPath(/item/list)ë¥¼ /WEB-INF/item/list.jspë¡œ ë³€í™˜í•˜ê³  jspíŒŒì¼ì„ htmlë¡œ ë³€í™˜</p>
  </li>
  <li>View ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬</li>
</ol>

<p>** 2ë²ˆê³¼ì •ì´ ê°œì¸ì ìœ¼ë¡œ ì´í•´ ì•ˆëœë‹¤.<br />
1) ê°•ì˜ì—ì„œëŠ” urlì— ë”°ë¥¸ handlerMappingì„ ì§ì ‘ í–ˆë‹¤.<br />
2) ë˜í•œ ìƒì†ì„ ì§ì ‘ í–ˆë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">initHandlerAdapters</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">handlerAdapters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">ControllerV3HandlerAdapter</span><span class="o">());</span> <span class="c1">//ControllerV3ë¥¼ ì§€ì›í•˜ëŠ” Adapter</span>
  <span class="n">handlerAdapters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">ControllerV4HandlerAdapter</span><span class="o">());</span> <span class="c1">//ControllerV4ë¥¼ ì§€ì›í•˜ëŠ” Adapter</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v3/members/new-form"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberFormControllerV3</span><span class="o">());</span>
<span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v3/members/save"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberSaveControllerV3</span><span class="o">());</span>
<span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v3/members"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberListControllerV3</span><span class="o">());</span>
<span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v4/members/new-form"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberFormControllerV4</span><span class="o">());</span>
<span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v4/members/save"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberSaveControllerV4</span><span class="o">());</span>
<span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"/front-controller/v5/v4/members"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberListControllerV4</span><span class="o">());</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberFormControllerV3</span> <span class="kd">implements</span> <span class="nc">ControllerV3</span><span class="o">{</span>
	
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">ModelView</span> <span class="nf">process</span><span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">paramMap</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">ModelView</span><span class="o">(</span><span class="s">"new-form"</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>í•˜ì§€ë§Œ ì‹¤ì œë¡œ ìŠ¤í”„ë§ì—ì„œëŠ” ë‘ ê°€ì§€ ê³¼ì •ì„ ì•Œì•„ì„œ í•´ì¤€ë‹¤.<br />
ì•„ë§ˆ Methodì˜ input parameter, return type ë“±ì„ ë³´ê³  í•˜ì§€ ì•Šì„ê¹Œ ìƒê°ëœë‹¤.</p>

<p>##ì¶”ê°€ë‚´ìš©
Handler vs Controller<br />
<a href="https://www.quora.com/What-is-an-handler-in-programming">www.quora.com/What-is-an-handler-in-programming</a><br />
<a href="https://web.csulb.edu/~pnguyen/cecs475/pdf/Web%20API%20Controller.pdf">web.csulb.edu/~pnguyen/cecs475/pdf/Web%20API%20Controller.pdf</a><br />
<a href="https://stackoverflow.com/questions/30165625/whats-difference-between-controller-and-handler-in-spring-mvc">https://stackoverflow.com/questions/30165625/whats-difference-between-controller-and-handler-in-spring-mvc</a></p>

<p>Handler : ì´ë²¤íŠ¸ ë°œìƒì‹œ í˜¸ì¶œ ë˜ëŠ” ì½”ë“œ
Controller : ì´ë²¤íŠ¸ ë°œìƒì‹œ(=HttpRequest) í˜¸ì¶œ ë˜ëŠ” ì½”ë“œ(=ì‘ì„±í•œ ì½”ë“œ ì²˜ë¦¬ í›„ response ë°˜í™˜)</p>

<p>Handler, Controller ëª¨ë‘ Springì—ì„œë§Œ í•œì •ì ìœ¼ë¡œ ì“°ì´ëŠ” ë‹¨ì–´ê°€ ì•„ë‹ˆë‹¤.
Springì´ HttpRequestë§Œ ì²˜ë¦¬í•˜ëŠ” ê²Œ ì•„ë‹ˆê¸° ë•Œë¬¸ì—(ex. MessageHandler) handlerë¼ëŠ” ë²”ìš©ì ì¸ ë‹¨ì–´ë¥¼ ì“´ ê²ƒ ê°™ë‹¤.</p>
:ET